# Deduplication of jobs using Job Schedulers

Sometimes it is desired to deduplicate jobs that are generated by job schedulers to save resources and avoid unnecesary work:

Deduplication options are not available in [`JobSchedulerTemplateOptions`](https://api.docs.bullmq.io/types/v5.JobSchedulerTemplateOptions.html) because they could interfere with job creation from scheduler templates. Since a new job is added as soon as the previous one moves to the active state, deduplication could disrupt this process by preventing the addition of this new record. However, there is an alternative to handle this. Let's look at an example:

```typescript
import { Queue, Worker } from 'bullmq';

const myQueue = new Queue('Paint');

const worker = new Worker(
  'Paint',
  async job => {
    // Add a job that will be deduplicated for 90 seconds.
    await myQueue.add(
      'house',
      { color: 'white' },
      { deduplication: { id: 'customValue', ttl: 90000 } },
    );
  },
  { connection },
);

await myQueue.upsertJobScheduler('repeat', {
  pattern: '* * * * *', // every minute
});
```

In this way, you can deduplicate a job when using job schedulers.

## Read more:

- ðŸ’¡ [Add Job API Reference](https://api.docs.bullmq.io/classes/v5.Queue.html#add)
- ðŸ’¡ [Upsert Job Scheduler API Reference](https://api.docs.bullmq.io/classes/v5.Queue.html#upsertJobScheduler)
